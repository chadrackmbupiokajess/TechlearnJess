{% extends 'base.html' %}
{% load static %}

{% block title %}Paiements - TechLearnJess{% endblock %}

{% block extra_css %}
<style>
    .payment-card {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
    }
    
    .payment-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    
    .payment-method {
        border: 2px solid transparent;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .payment-method:hover {
        border-color: #3b82f6;
        transform: scale(1.02);
    }
    
    .payment-method.selected {
        border-color: #3b82f6;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
    }
    
    .transaction-success {
        border-left: 4px solid #10b981;
    }
    
    .transaction-pending {
        border-left: 4px solid #f59e0b;
    }
    
    .transaction-failed {
        border-left: 4px solid #ef4444;
    }
    
    .amount-display {
        font-family: 'Courier New', monospace;
        font-weight: bold;
        font-size: 1.5rem;
    }
    
    .security-badge {
        animation: pulse 2s infinite;
    }
    
    .payment-animation {
        animation: paymentPulse 1.5s ease-in-out infinite;
    }
    
    @keyframes paymentPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
                <i class="fas fa-credit-card text-green-600 dark:text-green-400 mr-3"></i>
                Centre de Paiements
            </h1>
            <p class="text-xl text-gray-600 dark:text-gray-300">
                Gérez vos paiements et transactions en toute sécurité
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Sidebar - Résumé du compte -->
            <div class="lg:col-span-1">
                <!-- Solde et statistiques -->
                <div class="payment-card rounded-2xl p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                        <i class="fas fa-wallet text-green-500 mr-2"></i>
                        Mon Portefeuille
                    </h3>
                    
                    <div class="text-center mb-6">
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">Solde disponible</p>
                        <p class="amount-display text-green-600 dark:text-green-400">125,50 €</p>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-300">Dépenses ce mois</span>
                            <span class="text-sm font-semibold text-gray-900 dark:text-white">89,97 €</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-300">Cours achetés</span>
                            <span class="text-sm font-semibold text-gray-900 dark:text-white">3</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-300">Économies réalisées</span>
                            <span class="text-sm font-semibold text-green-600 dark:text-green-400">45,00 €</span>
                        </div>
                    </div>
                    
                    <button class="w-full mt-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl">
                        <i class="fas fa-plus mr-2"></i>
                        Recharger le Portefeuille
                    </button>
                </div>

                <!-- Méthodes de paiement sauvegardées -->
                <div class="payment-card rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                        <i class="fas fa-bookmark text-blue-500 mr-2"></i>
                        Méthodes Sauvegardées
                    </h3>
                    
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-orange-500 rounded flex items-center justify-center">
                                    <i class="fas fa-mobile-alt text-white text-sm"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Orange Money</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">***789</p>
                                </div>
                            </div>
                            <button class="text-gray-400 hover:text-red-500 transition-colors">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-red-500 rounded flex items-center justify-center">
                                    <i class="fas fa-mobile-alt text-white text-sm"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Airtel Money</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">***456</p>
                                </div>
                            </div>
                            <button class="text-gray-400 hover:text-red-500 transition-colors">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button class="w-full mt-4 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                        <i class="fas fa-plus mr-2"></i>
                        Ajouter une Méthode
                    </button>
                </div>
            </div>

            <!-- Contenu principal -->
            <div class="lg:col-span-2">
                <!-- Onglets -->
                <div class="flex space-x-1 mb-6 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl">
                    <button class="flex-1 py-2 px-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-medium shadow-sm">
                        <i class="fas fa-shopping-cart mr-2"></i>
                        Nouveau Paiement
                    </button>
                    <button class="flex-1 py-2 px-4 text-gray-600 dark:text-gray-400 rounded-lg font-medium hover:bg-white/50 dark:hover:bg-gray-700/50 transition-colors">
                        <i class="fas fa-history mr-2"></i>
                        Historique
                    </button>
                    <button class="flex-1 py-2 px-4 text-gray-600 dark:text-gray-400 rounded-lg font-medium hover:bg-white/50 dark:hover:bg-gray-700/50 transition-colors">
                        <i class="fas fa-receipt mr-2"></i>
                        Factures
                    </button>
                </div>

                <!-- Formulaire de paiement -->
                <div class="payment-card rounded-2xl p-6 mb-6">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">
                        <i class="fas fa-credit-card mr-2"></i>
                        Effectuer un Paiement
                    </h3>
                    
                    <!-- Sélection du cours -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
                            Cours à acheter
                        </label>
                        <div class="payment-method selected rounded-xl p-4 bg-white dark:bg-gray-700">
                            <div class="flex items-center space-x-4">
                                <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=80&h=80&fit=crop" 
                                     alt="Cours" class="w-16 h-16 rounded-lg object-cover">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 dark:text-white">
                                        Maîtriser React.js - Formation Complète
                                    </h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-300">
                                        Par Dr. Jean Dupont • 12 heures de contenu
                                    </p>
                                    <div class="flex items-center mt-2">
                                        <span class="text-lg font-bold text-green-600 dark:text-green-400">29,99 €</span>
                                        <span class="text-sm text-gray-500 dark:text-gray-400 line-through ml-2">49,99 €</span>
                                        <span class="bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 px-2 py-1 rounded-full text-xs font-medium ml-2">
                                            -40%
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Méthodes de paiement -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
                            Choisir une méthode de paiement
                        </label>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- Orange Money -->
                            <div class="payment-method rounded-xl p-4 bg-white dark:bg-gray-700">
                                <div class="text-center">
                                    <div class="w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <i class="fas fa-mobile-alt text-white text-2xl"></i>
                                    </div>
                                    <h4 class="font-semibold text-gray-900 dark:text-white mb-1">Orange Money</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Paiement mobile sécurisé</p>
                                    <div class="mt-3">
                                        <span class="bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-2 py-1 rounded-full text-xs font-medium">
                                            Populaire
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Airtel Money -->
                            <div class="payment-method rounded-xl p-4 bg-white dark:bg-gray-700">
                                <div class="text-center">
                                    <div class="w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <i class="fas fa-mobile-alt text-white text-2xl"></i>
                                    </div>
                                    <h4 class="font-semibold text-gray-900 dark:text-white mb-1">Airtel Money</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Transfert d'argent rapide</p>
                                    <div class="mt-3">
                                        <span class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-xs font-medium">
                                            Instantané
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- M-Pesa -->
                            <div class="payment-method rounded-xl p-4 bg-white dark:bg-gray-700">
                                <div class="text-center">
                                    <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <i class="fas fa-mobile-alt text-white text-2xl"></i>
                                    </div>
                                    <h4 class="font-semibold text-gray-900 dark:text-white mb-1">M-Pesa</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Service mobile money</p>
                                    <div class="mt-3">
                                        <span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full text-xs font-medium">
                                            Sécurisé
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Informations de paiement -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
                            Numéro de téléphone
                        </label>
                        <div class="relative">
                            <input type="tel" 
                                   class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                                   placeholder="+243 XXX XXX XXX"
                                   value="+243 812 345 789">
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                <i class="fas fa-check-circle text-green-500"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Résumé du paiement -->
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-4 mb-6">
                        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">Résumé du Paiement</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-300">Prix du cours</span>
                                <span class="text-gray-900 dark:text-white">29,99 €</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-300">Réduction</span>
                                <span class="text-green-600 dark:text-green-400">-20,00 €</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 dark:text-gray-300">Frais de transaction</span>
                                <span class="text-gray-900 dark:text-white">0,50 €</span>
                            </div>
                            <hr class="border-gray-300 dark:border-gray-600">
                            <div class="flex justify-between font-semibold text-lg">
                                <span class="text-gray-900 dark:text-white">Total</span>
                                <span class="text-green-600 dark:text-green-400">10,49 €</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sécurité -->
                    <div class="flex items-center justify-center mb-6">
                        <div class="flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300">
                            <i class="fas fa-shield-alt text-green-500 security-badge"></i>
                            <span>Paiement sécurisé par cryptage SSL 256-bit</span>
                        </div>
                    </div>

                    <!-- Bouton de paiement -->
                    <button class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-xl font-bold text-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 payment-animation">
                        <i class="fas fa-lock mr-2"></i>
                        Payer 10,49 € en Toute Sécurité
                    </button>
                </div>

                <!-- Historique des transactions récentes -->
                <div class="payment-card rounded-2xl p-6">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">
                        <i class="fas fa-history mr-2"></i>
                        Transactions Récentes
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Transaction réussie -->
                        <div class="transaction-success bg-white dark:bg-gray-700 rounded-xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center">
                                        <i class="fas fa-check text-green-600 dark:text-green-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 dark:text-white">
                                            Python pour l'IA - Formation Complète
                                        </h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">
                                            Orange Money • Il y a 2 jours
                                        </p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-semibold text-gray-900 dark:text-white">39,99 €</p>
                                    <span class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-xs font-medium">
                                        Réussie
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Transaction en attente -->
                        <div class="transaction-pending bg-white dark:bg-gray-700 rounded-xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center">
                                        <i class="fas fa-clock text-amber-600 dark:text-amber-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 dark:text-white">
                                            Design UX/UI Moderne
                                        </h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">
                                            Airtel Money • Il y a 1 heure
                                        </p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-semibold text-gray-900 dark:text-white">24,99 €</p>
                                    <span class="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 px-2 py-1 rounded-full text-xs font-medium">
                                        En attente
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Transaction échouée -->
                        <div class="transaction-failed bg-white dark:bg-gray-700 rounded-xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center">
                                        <i class="fas fa-times text-red-600 dark:text-red-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 dark:text-white">
                                            Marketing Digital 2024
                                        </h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">
                                            M-Pesa • Il y a 3 jours
                                        </p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-semibold text-gray-900 dark:text-white">19,99 €</p>
                                    <span class="bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 px-2 py-1 rounded-full text-xs font-medium">
                                        Échouée
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-6">
                        <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium">
                            Voir toutes les transactions
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Gestion de la sélection des méthodes de paiement
    const paymentMethods = document.querySelectorAll('.payment-method');
    
    paymentMethods.forEach(method => {
        method.addEventListener('click', function() {
            // Retirer la sélection de toutes les méthodes
            paymentMethods.forEach(m => m.classList.remove('selected'));
            // Ajouter la sélection à la méthode cliquée
            this.classList.add('selected');
        });
    });
    
    // Simulation de validation du numéro de téléphone
    const phoneInput = document.querySelector('input[type="tel"]');
    const checkIcon = document.querySelector('.fa-check-circle');
    
    phoneInput.addEventListener('input', function() {
        if (this.value.length >= 10) {
            checkIcon.style.display = 'block';
            checkIcon.classList.add('text-green-500');
            checkIcon.classList.remove('text-red-500');
        } else {
            checkIcon.style.display = 'none';
        }
    });
    
    // Animation du bouton de paiement
    const payButton = document.querySelector('.payment-animation');
    
    payButton.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Changer le texte et l'icône
        this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Traitement en cours...';
        this.disabled = true;
        
        // Simuler le traitement du paiement
        setTimeout(() => {
            this.innerHTML = '<i class="fas fa-check mr-2"></i>Paiement Réussi !';
            this.classList.remove('payment-animation');
            this.classList.add('bg-green-500');
            
            // Afficher une notification de succès
            setTimeout(() => {
                alert('Paiement effectué avec succès ! Vous avez maintenant accès au cours.');
            }, 500);
        }, 3000);
    });
});
</script>
{% endblock %}