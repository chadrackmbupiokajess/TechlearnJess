{% load static %}<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
        http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">

    <!-- Page d'accueil -->
    <url>
        <loc>{{ domain }}{% url 'core:home' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>daily</changefreq>
        <priority>1.0</priority>
    </url>

    <!-- Ã€ propos - Page importante pour Chadrack Mbu Jess -->
    <url>
        <loc>{{ domain }}{% url 'core:about' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>monthly</changefreq>
        <priority>0.9</priority>
    </url>

    <!-- Cours -->
    <url>
        <loc>{{ domain }}{% url 'courses:list' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.8</priority>
    </url>

    <!-- Forum -->
    <url>
        <loc>{{ domain }}{% url 'forum:index' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>daily</changefreq>
        <priority>0.7</priority>
    </url>

    <!-- Sessions Live -->
    <url>
        <loc>{{ domain }}{% url 'live_sessions:list' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.7</priority>
    </url>

    <!-- FAQ -->
    <url>
        <loc>{{ domain }}{% url 'core:faq' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>monthly</changefreq>
        <priority>0.6</priority>
    </url>
    
    <!-- Galerie -->
    <url>
        <loc>{{ domain }}{% url 'core:gallery' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.7</priority>
    </url>

    <!-- Connexion -->
    <url>
        <loc>{{ domain }}{% url 'accounts:login' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>monthly</changefreq>
        <priority>0.5</priority>
    </url>

    <!-- Inscription -->
    <url>
        <loc>{{ domain }}{% url 'accounts:register' %}</loc>
        <lastmod>{{ last_modified|date:"Y-m-d" }}</lastmod>
        <changefreq>monthly</changefreq>
        <priority>0.5</priority>
    </url>

    <!-- Cours individuels -->
    {% for course in courses %}
    <url>
        <loc>{{ domain }}{{ course.get_absolute_url }}</loc>
        <lastmod>{{ course.updated_at|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.8</priority>
    </url>
    {% endfor %}

    <!-- Articles de forum -->
    {% for topic in forum_topics %}
    <url>
        <loc>{{ domain }}{{ topic.get_absolute_url }}</loc>
        <lastmod>{{ topic.updated_at|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.6</priority>
    </url>
    {% endfor %}
    
    <!-- Images de la galerie -->
    {% for image in gallery_images %}
    <url>
        <loc>{{ domain }}{{ image.image.url }}</loc>
        <lastmod>{{ image.uploaded_at|date:"Y-m-d" }}</lastmod>
        <changefreq>yearly</changefreq>
        <image:image>
            <image:loc>{{ domain }}{{ image.image.url }}</image:loc>
            <image:title>{{ image.title }}</image:title>
            <image:caption>{{ image.description }}</image:caption>
        </image:image>
    </url>
    {% endfor %}

</urlset>